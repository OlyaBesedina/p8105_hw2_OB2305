p8105\_hw2\_ob2305
================
Olya Besedina
2019-09-30

# Problem 1

``` r
mr_trash = read_excel(
  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  col_names = TRUE,
  sheet = "Mr. Trash Wheel", 
  skip = 0,
  range = "A2:N408") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )

sports_balls_2017 = filter(mr_trash, year == "2017")
  median(pull(sports_balls_2017, sports_balls))
```

    ## [1] 8

Precipitation data for 2017

``` r
prec_2017 = read_excel(
  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2017 Precipitation",
  col_names = TRUE,
  range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate( 
    month = month.name[month],
    year = "2017")
```

Precipitation data for 2018

``` r
prec_2018 = read_excel(
  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2018 Precipitation",
  col_names = TRUE,
  range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total)%>% 
  mutate( 
    month = month.name[month],
    year = "2018")
```

Join two data
sets

``` r
prec_data = full_join(prec_2017, prec_2018, by = c("month", "total", "year"))

total_prec_2018 =filter(prec_2018, year == "2018")
sum(pull(total_prec_2018, total))
```

    ## [1] 70.33

Add description

# Problem 2

Importing Pols-month
dataset

``` r
pols_month = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(
    month = as.integer(month),
    month = month.name[month],
    president = recode(prez_gop, `0` = "Democrat", `1` = "Republican")) %>% 
  select(-prez_gop, -prez_dem, -day)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

    ## Warning: Unreplaced values treated as NA as .x is not compatible. Please
    ## specify replacements exhaustively or supply .default

``` r
head(pols_month)
```

    ## # A tibble: 6 x 9
    ##   year  month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <chr> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1 1947  January       23      51     253      23      45     198 Democrat 
    ## 2 1947  February      23      51     253      23      45     198 Democrat 
    ## 3 1947  March         23      51     253      23      45     198 Democrat 
    ## 4 1947  April         23      51     253      23      45     198 Democrat 
    ## 5 1947  May           23      51     253      23      45     198 Democrat 
    ## 6 1947  June          23      51     253      23      45     198 Democrat

Importing snp dataset

``` r
snp = read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year")) %>% 
  select(year, month, everything(), -day) %>% 
  arrange(year, month) %>% 
  mutate(
    month = as.integer(month),
    month = month.name[month]
  )
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
head(snp)
```

    ## # A tibble: 6 x 3
    ##   year  month    close
    ##   <chr> <chr>    <dbl>
    ## 1 1950  January   17.0
    ## 2 1950  October   19.5
    ## 3 1950  November  19.5
    ## 4 1950  December  20.4
    ## 5 1950  February  17.2
    ## 6 1950  March     17.3

Importing
Unemployment

``` r
unemployment = read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(jan:dec,
               names_to = "month",
               values_to = "unemployment_rate") %>% 
  mutate(
    month = recode(month, `jan` = "1", `feb` = "2", `mar` = "3", `apr` = "4", `may` = "5", `jun` = "6", `jul` = "7", `aug` = "8", `sep` = "9", `oct` = "10", `nov` = "11", `dec` = "12"),
    month = as.factor(month),
    month = month.name[month],
    year = as.character(year)) 
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
head(unemployment)
```

    ## # A tibble: 6 x 3
    ##   year  month     unemployment_rate
    ##   <chr> <chr>                 <dbl>
    ## 1 1948  January                 3.4
    ## 2 1948  May                     3.8
    ## 3 1948  June                    4  
    ## 4 1948  July                    3.9
    ## 5 1948  August                  3.5
    ## 6 1948  September               3.6

Joining snp and pols data
sets

``` r
result = left_join(pols_month, snp, by = c("year" = "year", "month" = "month"))
result1 = left_join(result, unemployment, by = c("year" = "year", "month" = "month")) 
```

``` r
#First data set represends the number of democratic and republican presidents, representatives, governors and senators for every month from 1947 to 2015. During this time the number of gop governors ranged between `r range(pull(pols_month, gov_gop))`, gop senators - `r range(pull(pols_month, sen_gop))`, gop representatives - `r range(pull(pols_month, rep_gop))`; democratic governors ranged between `r range(pull(pols_month, goc_dem))`, democratic senators - `r range(pull(pols_month, sen_dem))`, democratic representatives - `r range(pull(pols_month, rep_dem))`.

#snp data  set contains data that represends closing values of S&P stock index (variable name "close" for every month from `r min(pull(snp, year))` to `r max(pull(snp, year))`.  

#Unemployment data set contains wide data that represends unemployment rates for every month from the beggining of `r min(pull(unemployment, year))` to the end of `r max(pull(unemployment, year))`. The mean unemployment rate through out this time is `r mean(pull(unemployment, unemployment_rate))`.

#These three data sets were joined together using left_join function by the year and month variables.
```
